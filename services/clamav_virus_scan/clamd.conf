# --- clamd.conf for AWS Lambda + EFS ---
#
# This file tells the ClamAV daemon (clamd) how to run inside
# the Lambda container.

# 1. Point to the EFS mount
# This MUST match the path where your *other* Lambda (clamav-database)
# is saving the definitions.
# This also MUST match the mount path in your Lambda configuration.
DatabaseDirectory /mnt/efs/clamav_defs

# 2. Use a local socket for communication
# The Python code will connect to the daemon using this file.
# We use /tmp because it's the only writable directory in Lambda
# besides the EFS mount.
LocalSocket /tmp/clamd.sock

# 3. Run in the foreground
# Daemons usually run in the background, but in a container,
# the main process must stay in the foreground.
Foreground yes

# 4. Standard daemon settings
PidFile /tmp/clamd.pid
ScanArchive yes
ScanELF yes
ScanMail yes
ScanPE yes